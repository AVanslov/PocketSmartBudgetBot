{% extends "base.html" %}
{% load static %}
{% block content %} 
  <div style="margin-left: 60px; margin-right: 60px; margin-top: 20px; border-radius: 25px; background-color: #f2f2f2; padding: 20px">
    <form method="post">
      {% csrf_token %}
      <div style="display: flex; align-content: center;">
        <li><h1 class="main-title">{{ title }}</h1></li>
        {{ form.media.js }}
        {% for field in form.visible_fields %}
          <div style="flex: 1; padding-left: 25px; align-content: center;">
            {{ field.errors }}
            <div class="label">{{ field.label_tag }}</div> <li>{{ field }}</li>
            {% if field.help_text %}
              <p class="help" id="{{ field.auto_id }}_helptext">
                {{ field.help_text|safe }}
              </p>
            {% endif %}
          </div>
        {% endfor %}
        <!-- {{ form.as_p }} -->
          {% if "/delete/" in request.path %}
            <input class="button" style="background-color: #e75441;" type="submit" value="Delete">
          {% else %}
            <input class="button" type="submit" value="Submit">
          {% endif %}
      </div>
    </form>
  </div>

  <div style="display: flex; margin: 10px 50px 10px 50px;">
    <div style="flex: 1.3; border-radius: 25px; background-color: #f2f2f2; margin: 10px; padding: 20px;">
      <div>
        <form method="get">
          {% for field in filter.form.visible_fields %}
            <div style="display: inline-block; padding-left: 25px; align-content: center;">
              <li>{{ field }}</li>
            </div>
          {% endfor %}
          <li>
            <button class="filter-button" type="submit">Filter</button>
          </li>
        </form>
      </div>
      <table>
        <tr class="table-title">
          <th><b>Date</b></th>
          <th><b>Category</b></th>
          <th><b>Value</b></th>
          <th><b>Comment</b></th>
        </tr>
        {% for money in page_obj %}
          <tr>
            <th>{{ money.date }}</th>
            <th>{{ money.category.category }}</th>
            <th>{{ money.value }}</th>
            <th>{{ money.comment }}</th>
            <th class="no-hover">
              <form style="display: inline;" action="{% url 'webbudget:edit' money.id %}">
                <button class="button-table" >edit</button>
              </form>
              <form style="display: inline;" action="{% url 'webbudget:delete' money.id %}">
                <button class="button-table" style="background-color: #e75441;">delete</button>
              </form>
            </th>
          </tr>
          {% if not forloop.last %}
          {% endif %}
        {% endfor %}
          <!-- Подключаем пагинатор -->
        </table>
        {% include "includes/paginator.html" %}
    </div>
    <div style="flex: 1; border-radius: 25px; background-color: #f2f2f2; margin: 10px; padding: 20px;">
      <img src="/media/add_some_data.png"/>
    </div>
    <div style="flex: 0.7; border-radius: 25px; background-color: #f2f2f2; margin: 10px; padding: 20px;">
      <table>
        <tr class="table-title">
          <th><b>Categories of Incomes</b></th>
        </tr>
        {% for category in categories %}
          <tr>
            <th>{{ category.category }}</th>
            <th class="no-hover">
              <button class="button-table">edit</button>
              <button class="button-table" style="background-color: #e75441;">delete</button>
            </th>
          </tr>
        {% endfor %}
      </table>
      <table>
        <tr class="table-title">
          <th><b>Categories of Expenses</b></th>
        </tr>
        {% for category in expence_categories %}
          <tr>
            <th>{{ category.category }}</th>
            <th class="no-hover">
              <button class="button-table" >edit</button>
              <button class="button-table" style="background-color: #e75441;">delete</button>
            </th>
          </tr>
        {% endfor %}
      </table>
    </div>
  </div>
{% endblock %}